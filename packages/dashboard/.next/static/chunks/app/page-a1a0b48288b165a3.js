(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2557:(e,t,a)=>{"use strict";a.d(t,{ZE:()=>r,_z:()=>c,lj:()=>s});let n="/api";async function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mission_control",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=await fetch("".concat(n,"/messages?channel=").concat(e,"&limit=").concat(t));if(!a.ok)throw Error("API error: ".concat(a.status));return a.json()}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mission_control",a=await fetch("".concat(n,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,channel:t})});if(!a.ok)throw Error("API error: ".concat(a.status));return a.json()}async function r(){let e=await fetch("".concat(n,"/subagents"));if(!e.ok)throw Error("API error: ".concat(e.status));return e.json()}},5743:(e,t,a)=>{Promise.resolve().then(a.bind(a,8034))},8034:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(8111),s=a(5271),c=a(2557);function r(){let[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(""),[o,i]=(0,s.useState)(!1),l=(0,s.useRef)(null);async function h(){let e=a.trim();if(e&&!o){r(""),t(t=>[...t,{role:"user",content:e}]),i(!0);try{let{reply:a}=await (0,c._z)(e);t(e=>[...e,{role:"assistant",content:a}])}catch(e){t(e=>[...e,{role:"assistant",content:"Erreur de communication avec l'agent."}])}finally{i(!1)}}}return(0,s.useEffect)(()=>{(0,c.lj)().then(t).catch(console.error)},[]),(0,s.useEffect)(()=>{var e;null==(e=l.current)||e.scrollIntoView({behavior:"smooth"})},[e]),(0,n.jsxs)("div",{className:"chat-container",children:[(0,n.jsxs)("div",{className:"chat-header",children:[(0,n.jsx)("h1",{children:"Chat"}),(0,n.jsx)("span",{className:"badge badge-primary",children:"mission_control"})]}),(0,n.jsxs)("div",{className:"chat-messages",children:[e.map((e,t)=>(0,n.jsx)("div",{className:"chat-bubble ".concat(e.role),children:(0,n.jsx)("div",{className:"chat-bubble-content",children:e.content})},t)),o&&(0,n.jsx)("div",{className:"chat-bubble assistant",children:(0,n.jsx)("div",{className:"chat-bubble-content chat-typing",children:"En train de r\xe9fl\xe9chir..."})}),(0,n.jsx)("div",{ref:l})]}),(0,n.jsxs)("div",{className:"chat-input-area",children:[(0,n.jsx)("textarea",{className:"textarea chat-textarea",value:a,onChange:e=>r(e.target.value),onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h())},placeholder:"Envoyer un message...",rows:2,disabled:o}),(0,n.jsx)("button",{className:"btn btn-primary chat-send-btn",onClick:h,disabled:o||!a.trim(),children:"Envoyer"})]})]})}}},e=>{e.O(0,[814,743,358],()=>e(e.s=5743)),_N_E=e.O()}]);